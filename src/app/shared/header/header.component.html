<div class="header">
  <div class="header-main">
    <span nz-icon (click)="openDrawer()"
      nzType="menu" nzTheme="outline" class="header-main-menu"
    ></span>
    <div class="logo">
      <img 
        (click)="goHome()"
        src="../../../assets/images/header/yolo-logo.png" alt="logo-yolo-shop">
    </div>
  </div>
  <div class="category">
    <ng-container *ngFor="let category of categoryList">
      <span class="category-item"
        [ngClass]="{'active' : currentCategory == category}"
        (click)="navigateCatalog(category)">
        {{'header.category.' + category | translate}}
      </span>
    </ng-container>
    <span nz-dropdown [nzDropdownMenu]="menu" class="category-item">
      {{'header.category.service' | translate}} &nbsp;
      <span nz-icon nzType="down"></span>
      <nz-dropdown-menu #menu="nzDropdownMenu">
        <ul nz-menu nzSelectable>
          <li nz-menu-item>{{'header.category.second.installment' | translate}}</li>
          <li nz-menu-item>{{'header.category.second.reNewed' | translate}}</li>
          <li nz-menu-item>{{'header.category.second.guarantee' | translate}}</li>
        </ul>
      </nz-dropdown-menu>
    </span>
    <span class="category-item">
      {{'header.category.new' | translate}}
    </span>
  </div>
  <div class="header-info">
    <div class="header-search">
      <span (click)="showModalSearch()" nz-icon nzType="search" nzTheme="outline"></span>
      <nz-modal
      [nzStyle]="{ top: '20px' }"
      [(nzVisible)]="isSearch"
      [nzWidth]="1200"
      nzTitle="Bạn muốn tìm gì?"
      (nzOnCancel)="cancelSearch()"
    >
      <ng-container *nzModalContent>
        <p>some contents...</p>
        <p>some contents...</p>
        <p>some contents...</p>
      </ng-container>
    </nz-modal>
    </div>
    <div class="header-cart">
      <div>
        <nz-badge [nzCount]="currentCart" nzShowZero nz-popover [nzPopoverContent]="contentCart"
          nzPopoverTrigger="hover" nzPopoverPlacement="bottom"
          (click)="goToCart()">
          <span class="header-cart-icon" nz-icon nzType="shopping-cart" nzTheme="outline"></span>
        </nz-badge>
      </div>
      <ng-template #contentCart>
        <nz-list class="header-cart-list"
            [nzDataSource]="cartList"
            [nzNoResult]="emptyList"
          >
          <nz-list-item *ngFor="let item of cartList; trackBy:indentityProduct" class="header-cart-list-item">
            <div class="header-cart-list-item-product">
              <img [src]="item.product.urlPicture" alt="product-img" class="header-cart-list-item-product-img">
              <div class="header-cart-list-item-product-description">
                <span class="header-cart-list-item-product-description-title" 
                  (click)="goToCatalog(item.product.id)">
                  {{item.product.title}}
                </span>
                <div class="header-cart-list-item-product-description-list">
                  <div class="header-cart-list-item-product-description-list-item">
                    <span>{{'header.cart.color' | translate}} <strong>{{'common.label.color.' + item.color | translate}}</strong></span>
                  </div>
                  <div class="header-cart-list-item-product-description-list-item">
                    <span>{{'header.cart.size' | translate}} <strong>{{item.size}}</strong></span>
                  </div>
                </div>
              </div>
            </div>
            <div class="header-cart-list-item-quantity">
              {{item.quantity}}
            </div>
          </nz-list-item>
          <nz-list-footer *ngIf="cartList.length > 0" class="header-cart-list-button">
            <button nz-button nzType="primary" (click)="goToCart()">
              {{'header.cart.showCart' | translate}}
            </button>
          </nz-list-footer>
        </nz-list>
      </ng-template>
      <ng-template #emptyList>
        <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
        [nzNotFoundContent]="'header.cart.noItem' | translate" [nzNotFoundFooter]="footerTpl">
        <ng-template #footerTpl>
          <button nz-button nzType="primary" (click)="goToCatalog()">{{'header.cart.shopNow' | translate}}</button>
        </ng-template>
      </nz-empty>
      </ng-template>
    </div>
    <div class="header-user">
      <nz-avatar 
        nz-popover nzPopoverPlacement="bottom" nzPopoverTitle="Tài khoản" 
        [nzPopoverContent]="contentAvatar" nzPopoverTrigger="hover"
        nzIcon="user" [nzSrc]="isLogin ? userInfo.photo : ''">
      </nz-avatar>
    </div>
    <ng-template #contentAvatar>
      <div>
        <ng-container *ngIf="!isLogin; else logedIn">
          <p (click)="gotoLogin()">{{'header.main.login' | translate}}</p>
          <p (click)="gotoRegister()">{{'header.main.register' | translate}}</p>
        </ng-container>
        <ng-template #logedIn>
          <p (click)="logout()">{{'header.main.logout' | translate}}</p>
        </ng-template>
      </div>
    </ng-template>
    <div class="header-language">
      <img
        nz-tooltip nzTooltipPlacement="bottom"
        nzTooltipTitle="{{'header.main.vn' | translate}}"
        (click)="changeLanguage('vn')"
        src="../../../assets/images/header/vietnam.webp" alt="vietnam-flag">
      <img
        nz-tooltip nzTooltipPlacement="bottom"
        nzTooltipTitle="{{'header.main.en' | translate}}"
        (click)="changeLanguage('en')"
        src="../../../assets/images/header/usa.png" alt="usa-flag">
    </div>
  </div>
</div>

<nz-drawer [nzClosable]="false" 
  [nzVisible]="isOpenDrawer" 
  nzPlacement="left" nzTitle="Basic Drawer"
  (nzOnClose)="closeDrawer()"
  [nzTitle]="drawerHeader"
  [nzWidth]="330">
  <ng-container *nzDrawerContent>
    <ul nz-menu nzTheme="light" nzMode="inline">
      <li nz-submenu [nzTitle]="'header.drawer.category' | translate" nzIcon="appstore">
        <ul>
          <ng-container *ngFor="let category of categoryList">
            <li nz-menu-item
              (click)="navigateCatalog(category)">
              {{'header.category.' + category | translate}}
            </li>
          </ng-container>
        </ul>
      </li>
      <li nz-submenu [nzTitle]="'header.drawer.account' | translate" nzIcon="user">
        <ul>
          <li nz-menu-item (click)="gotoLogin()" *ngIf="!isLogin">{{'header.drawer.login' | translate}}</li>
          <li nz-menu-item (click)="gotoRegister()" *ngIf="!isLogin">{{'header.drawer.register' | translate}}</li>
          <li nz-menu-item *ngIf="isLogin">{{'header.drawer.setting' | translate}}</li>
          <li nz-menu-item (click)="logout()" *ngIf="isLogin">{{'header.drawer.logout' | translate}}</li>
        </ul>
      </li>
      <li nz-submenu [nzTitle]="'header.drawer.language' | translate" nzIcon="global">
        <ul>
          <li nz-menu-item (click)="changeLanguage('vn')">{{'header.drawer.vn' | translate}}</li>
          <li nz-menu-item (click)="changeLanguage('en')">{{'header.drawer.en' | translate}}</li>
          <li nz-menu-item (click)="changeLanguage('cn')">{{'header.drawer.cn' | translate}}</li>
        </ul>
      </li>
    </ul>
  </ng-container>
  <ng-template #drawerHeader>
    <div class="drawer-header">
      <img src="../../../assets/images/header/yolo-logo-1.png" alt="logo">
    </div>
  </ng-template>
</nz-drawer>